<div class="post-detail-container">
  <mat-toolbar color="primary">
    <button mat-icon-button (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <h1>Article Details</h1>
    <span class="spacer"></span>
    <div *ngIf="isAdmin && article">
      <button mat-icon-button (click)="editArticle()" matTooltip="Edit">
        <mat-icon>edit</mat-icon>
      </button>
      <button mat-icon-button (click)="deleteArticle()" matTooltip="Delete" color="warn">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
  </mat-toolbar>

  <div class="content">
    <div *ngIf="loading" class="loading">
      <mat-spinner></mat-spinner>
      <p>Loading article...</p>
    </div>

    <div *ngIf="error" class="error">
      <mat-icon>error</mat-icon>
      <p>{{ error }}</p>
      <button mat-raised-button (click)="goBack()">Go Back</button>
    </div>

    <mat-card *ngIf="!loading && !error && article">
      <mat-card-header>
        <mat-card-title class="article-title">{{ article.title }}</mat-card-title>
        <mat-card-subtitle>
          <div class="metadata">
            <span><mat-icon>person</mat-icon> {{ article.author || 'Unknown Author' }}</span>
            <span><mat-icon>calendar_today</mat-icon> {{ formatDate(article.publishedDate) }}</span>
          </div>
        </mat-card-subtitle>
      </mat-card-header>

      <mat-divider></mat-divider>

      <mat-card-content>
        <div class="article-content">
          {{ article.content }}
        </div>

        <mat-divider></mat-divider>

        <div class="article-footer">
          <p><small>Last updated: {{ formatDate(article.updatedAt) }}</small></p>
        </div>
      </mat-card-content>

      <mat-card-actions align="end">
        <button mat-button (click)="goBack()">Back to Posts</button>
        <button mat-raised-button color="primary" *ngIf="isAdmin" (click)="editArticle()">
          Edit Article
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>